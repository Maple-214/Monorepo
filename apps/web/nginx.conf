server {
  listen 80;
  server_name _;

  root /usr/share/nginx/html;
  index index.html;

  # 确保 remoteEntry.js 走子应用容器，而不是 fallback 成 index.html
  location ~ ^/(app1|app2)/remoteEntry\.js$ {
    proxy_pass http://$1:80/remoteEntry.js;
    proxy_set_header Host $host;
  }

  # 主站 SPA 路由处理
  location / {
    try_files $uri /index.html;
  }
}
